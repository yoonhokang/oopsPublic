<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' 'unsafe-inline' https://*.googleapis.com https://*.gstatic.com https://*.firebaseapp.com https://*.firebaseio.com; connect-src 'self' https://api.allorigins.win https://corsproxy.io https://api.codetabs.com https://securetoken.googleapis.com https://identitytoolkit.googleapis.com https://*.firebaseio.com https://firestore.googleapis.com; img-src * data:; frame-src https://*.firebaseapp.com;">
    <title>Web Page to Email</title>

    <!-- Local Styles -->
    <link rel="stylesheet" href="style.css">

    <!-- Firebase SDKs (Compat) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <!-- Shared Assets -->
    <link rel="stylesheet" href="../css/style.css">
    <script src="../js/firebase-config.js"></script>
    <script src="../js/auth.js"></script>
</head>

<body>

    <header
        style="display: flex; justify-content: space-between; padding: 1.5rem; align-items: center; max-width: 1200px; margin: 0 auto; width: 100%; box-sizing: border-box;">
        <a href="../index.html" class="back-btn" style="position: static;">&larr; Home</a>
        <div id="authContainer" class="auth-container"></div>
    </header>

    <div class="tool-container">
        <h1>Web Page to Email</h1>
        <p class="description">
            Capture a web page with its formatting enabled and prepare it for email transmission.<br>
            Enter a URL below to start.
        </p>

        <div class="input-group">
            <label for="urlInput">Target URL</label>
            <input type="text" id="urlInput" placeholder="https://example.com/article">

            <div class="button-group">
                <button id="sendBtn" class="action-btn" onclick="processAndSend()">Capture & Email</button>
                <button id="saveBtn" class="action-btn"
                    style="background: linear-gradient(135deg, #64748b, #475569); margin-top: 10px;"
                    onclick="saveToBoard()">Save to Board</button>
            </div>
        </div>

        <div id="statusArea"></div>

        <!-- Restored Debug Console -->
        <div class="debug-section">
            <div class="debug-title">Processing Log</div>
            <div id="debugConsole" class="console-box"></div>
        </div>

        <div id="boardSection" class="board-section"
            style="margin-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 1rem;">
            <h3>My Saved Posts (Recent 10)</h3>
            <ul id="postList" style="list-style: none; padding: 0; margin: 0;">Loading...</ul>
        </div>

        <div class="info-box"
            style="margin-top: 2rem; font-size: 0.85rem; color: #64748b; background: rgba(0, 0, 0, 0.2); padding: 1rem; border-radius: 8px;">
            <p>ðŸ“· <strong>How it works:</strong></p>
            <ul>
                <li>Because of email security standards, we cannot auto-paste HTML.</li>
                <li>We will <strong>Fetch</strong> the page, <strong>Copy</strong> it to your clipboard.</li>
                <li>Your email client will open automatically.</li>
                <li>Simply press <strong>Ctrl + V</strong> (Paste) in the email body.</li>
            </ul>
        </div>
    </div>

    <!-- App Script -->
    <script src="script.js"></script>

</body>

</html>